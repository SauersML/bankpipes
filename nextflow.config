// nextflow.config
params {
    // Input Data
    wgs_vds_path = 'gs://fc-aou-datasets-controlled/v7/wgs/short_read/snpindel/vds/hail.vds'
    flagged_samples_gcs_path = "gs://fc-aou-datasets-controlled/v7/wgs/short_read/snpindel/aux/relatedness/relatedness_flagged_samples.tsv"
    phenotype_concept_ids = [432510, 374919] // Ischemic stroke, cerebral infarction
    target_phenotype_name = "Ischemic Stroke"

    // Downsampling (can be passed to relevant script)
    enable_downsampling_for_vds_generation = true
    n_cases_downsample = 500
    n_controls_downsample = 500
    downsampling_random_state = 2025

    // Output & Temp
    gcs_temp_dir_base = "${System.getenv('WORKSPACE_BUCKET')}/prs_analysis_temp_nextflow" // Base for temp files
    gcs_hail_temp_dir_base = "${System.getenv('WORKSPACE_BUCKET')}/hail_temp_nextflow"
    output_dir_base = "${System.getenv('WORKSPACE_BUCKET')}/prs_analysis_runs_nextflow"

    models_list = [
        [id: 'PGS002724', url: 'https://ftp.ebi.ac.uk/pub/databases/spot/pgs/scores/PGS002724/ScoringFiles/Harmonized/PGS002724_hmPOS_GRCh38.txt.gz', phenotype: 'Ischemic Stroke'],
        [id: 'PGS000039', url: 'https://ftp.ebi.ac.uk/pub/databases/spot/pgs/scores/PGS000039/ScoringFiles/Harmonized/PGS000039_hmPOS_GRCh38.txt.gz', phenotype: 'Ischemic Stroke']
    ]
}

env {
    WORKSPACE_BUCKET = System.getenv('WORKSPACE_BUCKET')
    WORKSPACE_CDR = System.getenv('WORKSPACE_CDR')
    PYTHONPATH = System.getenv('PYTHONPATH')
}

// Enable attempts for retries
process.maxRetries = 2
